<HTML>
<HEAD>
<TITLE> OmniRPC: Using Globus </TITLE>
</HEAD>
<BODY bgcolor="#fffff0">

<h2> Globus環境での実行 </h2>

これまでは、rshが実行できるローカルな環境について述べてきましたが、
rshは、広域ネットワークの環境ではつかえません。

グリッド環境を構築するために広く用いられている基本ソフトウエアである
Globusを使う場合について説明します。
Globusを用いる場合でも、リモートホストにおいてリモート実行プログラムを
作成、登録、プログラミングについてはかわりません。変わるのは、
ホストファイルhosts.xmlの記述だけです。

<dl>
<dt> <a href=1> Globusを使った実行環境 </a> </dt>
<dt> <a href=2> Globusの準備 </a> </h3>
<dt> <a href=3> Globusのためのホストファイル</a> </dt>
<dt> <a href=4> プログラムの実行</a> </dt>
</dl>

<!-- ----------------------------- -->
<hr>
<h3> <a name=1> Globusを使った実行環境 </a> </h3>

<p>
実行環境として、以下の環境を仮定します。
</p>
<ol>
<li> クライアントホストは、alice.hpcs.is.tukuba.ac.jp
<li> リモートホストは、dennis.hpcc.jp
リモートホストにおいては、globus gate keeperが動いている必要があ
ります。
<li> リモートホスト側においては非特権ポート(1024以上)は全てopenである
と仮定します。(注：ポートをある範囲で制限する方法については、globusの
マニュアルを参照してください)
</ol>

以下の説明では、クライアントホスト側からリモートホスト側にはジョブを起
動できるように環境設定されているものとします。

<h3> <a name=2> Globusの準備 </a> </h3>
<p>
まずは、Globusを使う場合にはクライアントホストにおいて、proxyを初期し
ます。
</p>

<pre>
% grid-proxy-init
</pre>
<p>
ここで、pass phaseを入力し、proxy certificateを作成します。
Globusが正常に動作するかを確認するために、例えば、ここで、
</p>
<pre>
% globusrun -o -r dennis.hpcc.jp '&(executable=/bin/date)'
</pre>
<p>
として、Globusが正常に動作していることを確認しましょう。
</p>

<h3> <a name=3> Globusのためのホストファイル</a> </h3>

<p>
deniss.hpcc.jpを使うためには、hosts.xmlに記述し、このホストファイルを
使ってクライアントプログラムを実行します。Globusを用いたリモートホスト
の場合は以下のように記述します。
</p>

<pre>
&lt;?xml version="1.0" ?&gt;
&lt;OmniRpcConfig&gt;
   &lt;Host name="dennis.hpcc.jp" arch="i386" os="linux"&gt;
   &lt;Agent invoker="globus" /&gt;
   &lt;/Host&gt;
&lt;/OmniRpcConfig&gt;
</pre>
<p>
これはリモート実行プログラムを起動するためのagentをGlobusを使って行う
ための記述です。この指定でのagentとrexの関係は以下のようになります。
</p>
<img src="fig3.gif">

<h3><a name=4> クライアントプログラムの実行 </a> </h3>
<p>
上のhosts.xmlを使う以外は同じ手順で実行することができます。
<pre>
% a.out --hostfile hosts.xml <em> args ... </em>
</pre>
</p>
<hr>
</BODY>
</HTML>

