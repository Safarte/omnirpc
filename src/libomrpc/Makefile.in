# $Id: Makefile.in,v 1.1.1.1 2004-11-03 21:01:19 yoshihiro Exp $
# $Release: omnirpc-2.0.1 $
# $Copyright:
#  OmniRPC Version 1.0
#  Copyright (C) 2002-2004 HPCS Laboratory, University of Tsukuba.
#  
#  This software is free software; you can redistribute it and/or modify
#  it under the terms of the GNU Lesser General Public License version
#  2.1 published by the Free Software Foundation.
#  
#  Please check the Copyright and License information in the files named
#  COPYRIGHT and LICENSE under the top  directory of the OmniRPC Grid PRC 
#  System release kit.
#  
#  
#  $

TOPDIR          = @TOPDIR@
MKRULESDIR      = @MKRULESDIR@

include $(MKRULESDIR)/vars.mk

all:	libomrpc_io.a libomrpc_stub.a libomrpc_client.a

SRCS = omrpc_io.c omrpc_io_event.c omrpc_io_rw.c omrpc_exec.c \
	omrpc_call.c omrpc_misc.c ninf_comm_lib.c ninf_misc.c \
	omrpc_exec_lib.c omrpc_rpc_lib.c omrpc_rpc_flib.c omrpc_local.c \
	omrpc_client.c omrpc_host.c omrpc_schedule.c omrpc_rpc.c \
	omrpc_stub_lib.c xml_reader.c \
	tlog.c tlog-time.c tlog-omrpc.c \
	omrpc_mon.c \
	omrpc_globus.c omrpc_io_globus.c omrpc_io_rw_file.c \
        omrpc_mpi_client.c omrpc_mpi_lib.c omrpc_mpi.c omrpc_mpi_io.c omrpc_mpi_event.c

IO_LIB_OBJS = omrpc_io.o omrpc_io_event.o omrpc_io_rw.o omrpc_exec.o \
	omrpc_call.o omrpc_misc.o ninf_comm_lib.o ninf_misc.o \
	omrpc_globus.o omrpc_io_globus.o omrpc_io_rw_file.o \
	omrpc_mpi_lib.o omrpc_mpi_io.o omrpc_mpi.o

CLIENT_LIB_OBJS = omrpc_exec_lib.o omrpc_rpc_lib.o omrpc_rpc_flib.o \
	omrpc_local.o tlog.o tlog-time.o tlog-omrpc.o \
	omrpc_client.o omrpc_host.o omrpc_schedule.o omrpc_rpc.o xml_reader.o \
        omrpc_mpi_client.o omrpc_mpi.o omrpc_mpi_event.o


STUB_LIB_OBJS = omrpc_stub_lib.o \
	omrpc_globus.o omrpc_io_globus.o omrpc_mon.o

TARGET_LIBS = libomrpc_io.a libomrpc_client.a libomrpc_stub.a

all: $(TARGET_LIBS)

libomrpc_io.a: $(IO_LIB_OBJS) 
	rm -f $@
	$(AR) $@ $(IO_LIB_OBJS)
	$(RANLIB) $@

libomrpc_stub.a: $(STUB_LIB_OBJS)
	rm -f $@
	$(AR) $@ $(STUB_LIB_OBJS)
	$(RANLIB) $@

libomrpc_client.a: $(CLIENT_LIB_OBJS) 
	rm -f $@
	$(AR) $@ $(CLIENT_LIB_OBJS)
	$(RANLIB) $@

include $(MKRULESDIR)/rules.mk
include .depend
